package ru.netology


data class Post(
    val id: Int = 0, // –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ—Å—Ç–∞
    val fromId: Int = 0, // ID –∞–≤—Ç–æ—Ä–∞ –ø–æ—Å—Ç–∞
    val ownerId: Int = 0, // ID –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Å—Ç–µ–Ω—ã
    val date: Int = 0, // –î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ—Å—Ç–∞
    val text: String = "", // –¢–µ–∫—Å—Ç –ø–æ—Å—Ç–∞
    val markedAsAds: Boolean = false, // –§–ª–∞–≥, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ—Å—Ç —Ä–µ–∫–ª–∞–º–æ–π
    val isPinned: Boolean = false, // –§–ª–∞–≥, –∑–∞–∫—Ä–µ–ø–ª–µ–Ω –ª–∏ –ø–æ—Å—Ç
    val canPin: Boolean = false, // –§–ª–∞–≥, –º–æ–∂–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–∫—Ä–µ–ø–∏—Ç—å –ø–æ—Å—Ç
    val canDelete: Boolean = false, // –§–ª–∞–≥, –º–æ–∂–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª–∏—Ç—å –ø–æ—Å—Ç
    val canEdit: Boolean = false, // –§–ª–∞–≥, –º–æ–∂–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç
    val isFavorite: Boolean = false, // –§–ª–∞–≥, –¥–æ–±–∞–≤–ª–µ–Ω –ª–∏ –ø–æ—Å—Ç –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
    val postponedId: Int = 0, // ID –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –ø–æ—Å—Ç–∞ (–µ—Å–ª–∏ –ø–æ—Å—Ç –æ—Ç–ª–æ–∂–µ–Ω)
    val views: Int = 0, // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –ø–æ—Å—Ç–∞
    val comments: Comments = Comments(), // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö
    val likes: Likes = Likes() // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–∞–π–∫–∞—Ö

)

data class Comments(
    val count: Int = 0, // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
    val canPost: Boolean = false // –§–ª–∞–≥, –º–æ–∂–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
)

data class Likes(
    val count: Int = 0, // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–∞–π–∫–æ–≤
    val userLikes: Boolean = false // –§–ª–∞–≥, –ø–æ—Å—Ç–∞–≤–∏–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ª–∞–π–∫
)

class WallService {
    private var lastId = 0
    private val posts = mutableListOf<Post>() // –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ—Å—Ç–æ–≤

    fun add(post: Post): Post {
        lastId++
        val newPost = post.copy(id = lastId) // üëà –ò–∑–º–µ–Ω–µ–Ω –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, id –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä
        posts.add(newPost)
        return newPost
    }

    fun getById(id: Int): Post? { // –ú–µ—Ç–æ–¥ –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ—Å—Ç–∞ –ø–æ ID
        return posts.find { it.id == id } // –ò—â–µ–º –ø–æ—Å—Ç –≤ —Å–ø–∏—Å–∫–µ –ø–æ ID
    }

    fun update(post: Post): Boolean { // –ú–µ—Ç–æ–¥ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å—Ç–∞
        val index = posts.indexOfFirst { it.id == post.id } // –ò—â–µ–º –∏–Ω–¥–µ–∫—Å –ø–æ—Å—Ç–∞ –ø–æ ID
        if (index != -1) { // –ï—Å–ª–∏ –ø–æ—Å—Ç –Ω–∞–π–¥–µ–Ω (–∏–Ω–¥–µ–∫—Å –Ω–µ -1)
            posts[index] = post // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ—Å—Ç –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∏–Ω–¥–µ–∫—Å–µ
            return true // –í–æ–∑–≤—Ä–∞—â–∞–µ–º true, –µ—Å–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ
        }
        return false // –í–æ–∑–≤—Ä–∞—â–∞–µ–º false, –µ—Å–ª–∏ –ø–æ—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
        }
    }
fun main() {
    val wallService = WallService() // –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ —Å–µ—Ä–≤–∏—Å–∞

    val post1 = Post(fromId = 1, ownerId = 1, date = 1678870400, text = "–ü—Ä–∏–≤–µ—Ç!") // –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Å—Ç–∞
    val post2 = Post(fromId = 2, ownerId = 2, date = 1678870500, text = "–ö–∞–∫ –¥–µ–ª–∞?") // –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ –ø–æ—Å—Ç–∞

    val addedPost1 = wallService.add(post1) // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Å—Ç–∞ –≤ —Å–µ—Ä–≤–∏—Å
    val addedPost2 = wallService.add(post2) // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ –ø–æ—Å—Ç–∞ –≤ —Å–µ—Ä–≤–∏—Å

    println("–ü–æ—Å—Ç 1: ${addedPost1}") // –í—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–µ—Ä–≤–æ–º –ø–æ—Å—Ç–µ
    println("–ü–æ—Å—Ç 2: ${addedPost2}") // –í—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤—Ç–æ—Ä–æ–º –ø–æ—Å—Ç–µ

    val updatedPost = post1.copy(text = "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?") // –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ø–∏–∏ –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Å—Ç–∞ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º
    wallService.update(updatedPost) // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Å—Ç–∞ –≤ —Å–µ—Ä–≤–∏—Å–µ

    println(wallService.getById(post1.id)) // –í—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–º –ø–µ—Ä–≤–æ–º –ø–æ—Å—Ç–µ
}

